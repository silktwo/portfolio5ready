{/* Full-width images without gaps after description */}
{caseProject.projectMedia && caseProject.projectMedia.length > 0 && (
  <div className="" style={{ lineHeight: 0 }}>
    {caseProject.projectMedia.slice(0, 3).map((image, index) => {
      // Шаблон: 2 поруч (index 0–1) → 1 фул (index 2)
      const isFullWidth = index === 2
      const isPairStart = index === 0

      if (isFullWidth) {
        // Full-width image (3-тє зображення)
        return (
          <div
            key={index}
            className="w-full cursor-pointer block"
            style={{ lineHeight: 0 }}
            onClick={() => openModal(index, caseProject.projectMedia)}
          >
            <img
              src={image || "/placeholder.svg"}
              alt={`${caseProject.projectTitle} - Image ${index + 1}`}
              className="w-full h-auto object-cover block hover:opacity-90 transition-opacity"
              style={{ margin: 0, padding: 0, display: "block", lineHeight: 0 }}
            />
          </div>
        )
      } else if (isPairStart) {
        // Пара: 0-й і 1-й
        const nextImage = caseProject.projectMedia[1]
        return (
          <div key={`pair-${index}`} className="flex" style={{ gap: 0, lineHeight: 0 }}>
            <div
              className="w-1/2 cursor-pointer block"
              style={{ lineHeight: 0 }}
              onClick={() => openModal(0, caseProject.projectMedia)}
            >
              <img
                src={image || "/placeholder.svg"}
                alt={`${caseProject.projectTitle} - Image 1`}
                className="w-full h-auto object-cover block hover:opacity-90 transition-opacity"
                style={{ margin: 0, padding: 0, display: "block", lineHeight: 0 }}
              />
            </div>
            {nextImage && (
              <div
                className="w-1/2 cursor-pointer block"
                style={{ lineHeight: 0 }}
                onClick={() => openModal(1, caseProject.projectMedia)}
              >
                <img
                  src={nextImage || "/placeholder.svg"}
                  alt={`${caseProject.projectTitle} - Image 2`}
                  className="w-full h-auto object-cover block hover:opacity-90 transition-opacity"
                  style={{ margin: 0, padding: 0, display: "block", lineHeight: 0 }}
                />
              </div>
            )}
          </div>
        )
      } else {
        // пропускаємо кінець пари (index 1), бо відрендерено в блоці вище
        return null
      }
    })}
  </div>
)}

{/* Gallery Section - No title, continue alternating layout */}
<section id="gallery">
  {/* Продовжуємо шаблон 2→фул без проміжків */}
  {caseProject.projectMedia && caseProject.projectMedia.length > 3 && (
    <div style={{ lineHeight: 0 }}>
      {caseProject.projectMedia.slice(3).map((image, index) => {
        const actualIndex = index + 3 // реальний індекс у всьому масиві
        // Шаблон має лишатися 2→фул у глобальному індексі:
        // групи по 3: [дві поруч: mod 3 = 1,2] → [фул: mod 3 = 0]
        const mod = (actualIndex + 1) % 3
        const isFullWidth = mod === 0
        const isPairStart = mod === 1

        if (isFullWidth) {
          // Full-width image
          return (
            <div
              key={actualIndex}
              className="w-full cursor-pointer block"
              style={{ lineHeight: 0 }}
              onClick={() => openModal(actualIndex, caseProject.projectMedia)}
            >
              <img
                src={image || "/placeholder.svg"}
                alt={`${caseProject.projectTitle} - Gallery ${actualIndex + 1}`}
                className="w-full h-auto object-cover block hover:opacity-90 transition-opacity"
                style={{ margin: 0, padding: 0, display: "block", lineHeight: 0 }}
              />
            </div>
          )
        } else if (isPairStart) {
          // Старт пари — рендеримо одразу два (actualIndex і actualIndex+1)
          const nextImage = caseProject.projectMedia[actualIndex + 1]
          if (nextImage) {
            return (
              <div
                key={`gallery-pair-${actualIndex}`}
                className="flex"
                style={{ gap: 0, lineHeight: 0 }}
              >
                <div
                  className="w-1/2 cursor-pointer block"
                  style={{ lineHeight: 0 }}
                  onClick={() => openModal(actualIndex, caseProject.projectMedia)}
                >
                  <img
                    src={image || "/placeholder.svg"}
                    alt={`${caseProject.projectTitle} - Gallery ${actualIndex + 1}`}
                    className="w-full h-auto object-cover block hover:opacity-90 transition-opacity"
                    style={{ margin: 0, padding: 0, display: "block", lineHeight: 0 }}
                  />
                </div>
                <div
                  className="w-1/2 cursor-pointer block"
                  style={{ lineHeight: 0 }}
                  onClick={() => openModal(actualIndex + 1, caseProject.projectMedia)}
                >
                  <img
                    src={nextImage || "/placeholder.svg"}
                    alt={`${caseProject.projectTitle} - Gallery ${actualIndex + 2}`}
                    className="w-full h-auto object-cover block hover:opacity-90 transition-opacity"
                    style={{ margin: 0, padding: 0, display: "block", lineHeight: 0 }}
                  />
                </div>
              </div>
            )
          } else {
            // якщо лишилося одне — покажемо його окремо
            return (
              <div
                key={actualIndex}
                className="w-full cursor-pointer block"
                style={{ lineHeight: 0 }}
                onClick={() => openModal(actualIndex, caseProject.projectMedia)}
              >
                <img
                  src={image || "/placeholder.svg"}
                  alt={`${caseProject.projectTitle} - Gallery ${actualIndex + 1}`}
                  className="w-full h-auto object-cover block hover:opacity-90 transition-opacity"
                  style={{ margin: 0, padding: 0, display: "block", lineHeight: 0 }}
                />
              </div>
            )
          }
        } else {
          // кінець пари — пропускаємо (рендериться разом зі стартом)
          return null
        }
      })}
    </div>
  )}
</section>
